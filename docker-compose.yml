version: '3'

services:
  algod:
    image: "sdk-harness-algod"
    container_name: sdk-harness-algod
    build:
      context: .
      dockerfile: "./docker/algod/${TYPE:-channel}/Dockerfile"
      args:
        # This is used with TYPE="channel" to override the channel.
        CHANNEL: "${CHANNEL:-nightly}"

        # Set network template file to dev mode network if it is not manually set.
        NETWORK_TEMPLATE_PATH: "/tmp/network_config/${NETWORK_TEMPLATE:-DevModeNetwork.json}"
        
        # This is used with TYPE="source" to override the git information.
        URL: "${ALGOD_URL:-https://github.com/algorand/go-algorand}"
        BRANCH: "${ALGOD_BRANCH:-master}"
    ports:
      - 60001:60001
      - 60000:60000
    networks:
      - sdk-harness
    volumes:
      - genesis-file:/genesis-file
      
networks:
  sdk-harness:

volumes:
  genesis-file:
